extends layout

block content

    .base_page
      .cardbig
        .pad_mod
          .card
            //h2= title
            h3 #{recipe.title}
            p Author: #{recipe.author}
            img(src=`/images/${recipe.img}` class="imgr" alt=`alt:${recipe.img}`)
            
            hr
            b Related Issues:
            each issue in recipe.relatedIssues
                p
                | &dot;  #{issue}
                p
            hr
            b Ingredients:
            each item in recipe.ingredients
                p
                | &dot;  #{item}
                p
            hr
            b Instructions:
            p #{recipe.description}
            hr
            - var over_score=0
            each comment in recipe.comments
              - over_score = over_score + comment.score
            - over_score = over_score/recipe.comments.length
            hr
            b Overall Score:
            p #{over_score.toFixed(2)}/5
            hr

            .card
              .card-body
                form.row.g-3(action, method="post", role="form")
                  .col-md-6
                      input.form-control#comments(type="hidden", name="comments", value=recipe.comments)
                  .col-md-6
                      input.form-control#recipeReference(type="hidden", name="recipeReference", value=recipe._id)
                  .col-md-9
                    label.form-label(for="content") Describe your comment
                    input.form-control#content(type="text", name="content", placeholder="Input Comment")
                  .col-md-2
                    label.form-label(for="score") How was it?
                    div.emoji-selector
                      input(type="radio", id="score-5", name="score", value="5")
                      label(for="score-5") üòç
                      input(type="radio", id="score-4", name="score", value="4")
                      label(for="score-4") üòä
                      input(type="radio", id="score-3", name="score", value="3")
                      label(for="score-3") üòê
                      input(type="radio", id="score-2", name="score", value="2")
                      label(for="score-2") üòï
                      input(type="radio", id="score-1", name="score", value="1")
                      label(for="score-1") üòû
                  .col-md-1
                    .vertical-center
                    button.btn.btn-outline-primary(type="submit") Post New...

    
        .card
          h3.text-left Comments Section
          table.table.table-hover.table-light.table-responsive.bg-secondary.table-striped
            caption
            thead.fixed
              tr
                th.text-center(scope="col") #
                th.text-center(scope="col") Content
                th.text-center(scope="col") Author
                th.text-center(scope="col") Score
                th.text-center(scope='col') Delete
              tbody
                - var pos=1
                each comment in recipe.comments
                  tr
                    td.text-center.numComment=pos++
                    td.text-center #{comment.content}
                    td.text-center #{comment.author}
                    td.text-center #{comment.score}
                    td.text-center
                      form.row.g-3(action, method="post", role="form")
                        input.form-control#content(type="hidden", name="recipeReference", value=recipe._id)
                        a.btn.btn-danger.space(role='button' href='/recipes/comments/delete/'+recipe._id+'/'+ comment._id) Borrar Comentario
                        em.fas.fa-edit
        if superuser
        .base_page
          .pad_mod
            .col-md-12
              label.form-label()
              a.btn.btn-danger.px-4.float-start.mt-4.mb-4(role='button' href='/recipes/delete/'+recipe._id) Delete Recipe
              label.form-label()
              a.btn.btn-primary.px-4.float-end.mt-4.mb-4(role='button' href='/recipes/update/'+recipe._id) Update Recipe
              label.form-label()
          

    